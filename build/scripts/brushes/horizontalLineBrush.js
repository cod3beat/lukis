define(["require","fabric","flight/lib/compose","mixins/with_outline_helper"],function(t){var i=t("fabric"),e=t("flight/lib/compose"),r=t("mixins/with_outline_helper"),n={create:function(t){var e=new i.PatternBrush(t);return e.getPatternSrc=function(){var t=i.document.createElement("canvas");t.width=t.height=10;var e=t.getContext("2d");return e.strokeStyle=this.color,e.lineWidth=5,e.beginPath(),e.moveTo(0,5),e.lineTo(10,5),e.closePath(),e.stroke(),t},e},createShapeBrush:function(t,e){var r=this.create(t);r.width=e.brushWidth||10,r.color=e.color;for(var n=this.createOutline(r,e.shape,e),o=n.length-1;o>=0;o--)r._points.push(new i.Point(n[o].x,n[o].y));r._finalizeAndAddPath()}};return e.mixin(n,[r]),n});